<script>
  // colors taken from tableau.ColorBlind10 theme
  // https://nagix.github.io/chartjs-plugin-colorschemes/colorchart.html

  const c01PrimBlue = '#1170aa'
  const c02PrimOrange = '#fc7d0b'
  const c03PrimGray = '#a3acb9'
  const c04SecGray = '#57606c'
  const c05SecBlue = '#5fa2ce'
  const c06PrimRed = '#c85200'
  const c07TerGray = '#7b848f'
  const c08TerBlue = '#a3cce9'
  const c09SecOrange = '#ffbc79'
  const c10ForGray = '#c8d0d9'  
  
  // Recent mortality data

  const elt17Males2015RawData = [{x: 0, y: 0.004766}, {x: 1, y: 0.000306}, {x: 2, y: 0.000207}, {x: 3, y: 0.000147}, {x: 4, y: 0.000115}, {x: 5, y: 0.000099}, {x: 6, y: 0.000091}, {x: 7, y: 0.000088}, {x: 8, y: 0.000088}, {x: 9, y: 0.000089}, {x: 10, y: 0.000091}, {x: 11, y: 0.000094}, {x: 12, y: 0.0001}, {x: 13, y: 0.000112}, {x: 14, y: 0.000134}, {x: 15, y: 0.000172}, {x: 16, y: 0.000233}, {x: 17, y: 0.000311}, {x: 18, y: 0.000391}, {x: 19, y: 0.000457}, {x: 20, y: 0.000496}, {x: 21, y: 0.000516}, {x: 22, y: 0.000529}, {x: 23, y: 0.000537}, {x: 24, y: 0.000543}, {x: 25, y: 0.00055}, {x: 26, y: 0.000566}, {x: 27, y: 0.000594}, {x: 28, y: 0.000634}, {x: 29, y: 0.000682}, {x: 30, y: 0.000728}, {x: 31, y: 0.000763}, {x: 32, y: 0.000796}, {x: 33, y: 0.000838}, {x: 34, y: 0.000895}, {x: 35, y: 0.000969}, {x: 36, y: 0.00106}, {x: 37, y: 0.001163}, {x: 38, y: 0.001274}, {x: 39, y: 0.001379}, {x: 40, y: 0.001474}, {x: 41, y: 0.001576}, {x: 42, y: 0.001706}, {x: 43, y: 0.001858}, {x: 44, y: 0.002017}, {x: 45, y: 0.00217}, {x: 46, y: 0.002314}, {x: 47, y: 0.002455}, {x: 48, y: 0.002623}, {x: 49, y: 0.002839}, {x: 50, y: 0.00311}, {x: 51, y: 0.003435}, {x: 52, y: 0.003798}, {x: 53, y: 0.004178}, {x: 54, y: 0.004587}, {x: 55, y: 0.005061}, {x: 56, y: 0.005599}, {x: 57, y: 0.006153}, {x: 58, y: 0.006709}, {x: 59, y: 0.007326}, {x: 60, y: 0.008049}, {x: 61, y: 0.008812}, {x: 62, y: 0.009538}, {x: 63, y: 0.010312}, {x: 64, y: 0.011291}, {x: 65, y: 0.012482}, {x: 66, y: 0.013763}, {x: 67, y: 0.015122}, {x: 68, y: 0.016734}, {x: 69, y: 0.018712}, {x: 70, y: 0.020908}, {x: 71, y: 0.023125}, {x: 72, y: 0.0254}, {x: 73, y: 0.027864}, {x: 74, y: 0.030658}, {x: 75, y: 0.033931}, {x: 76, y: 0.037755}, {x: 77, y: 0.042067}, {x: 78, y: 0.046868}, {x: 79, y: 0.052464}, {x: 80, y: 0.059114}, {x: 81, y: 0.066728}, {x: 82, y: 0.075115}, {x: 83, y: 0.084348}, {x: 84, y: 0.094629}, {x: 85, y: 0.10611}, {x: 86, y: 0.118909}, {x: 87, y: 0.133183}, {x: 88, y: 0.149149}, {x: 89, y: 0.166598}, {x: 90, y: 0.184091}, {x: 91, y: 0.200675}, {x: 92, y: 0.218727}, {x: 93, y: 0.241585}, {x: 94, y: 0.2686}, {x: 95, y: 0.297347}, {x: 96, y: 0.326313}, {x: 97, y: 0.356129}, {x: 98, y: 0.38647}, {x: 99, y: 0.41785}, {x: 100, y: 0.449217}, {x: 101, y: 0.48015}, {x: 102, y: 0.505257}, {x: 103, y: 0.529348}, {x: 104, y: 0.555803}, {x: 105, y: 0.58012}, {x: 106, y: 0.600178}, {x: 107, y: 0.625666}, {x: 108, y: 0.651023}, {x: 109, y: 0.676172}, {x: 110, y: 0.701065}, {x: 111, y: 0.725677}, {x: 112, y: 0.75104}]

  const braMales2018RawData = [{x:0, y:0.013305251}, {x:1, y:0.000912361}, {x:2, y:0.000600557}, {x:3, y:0.000462823}, {x:4, y:0.000382937}, {x:5, y:0.000330729}, {x:6, y:0.000294797}, {x:7, y:0.000270192}, {x:8, y:0.000254978}, {x:9, y:0.000249142}, {x:10, y:0.000254396}, {x:11, y:0.00027451}, {x:12, y:0.000316127}, {x:13, y:0.000390211}, {x:14, y:0.000514428}, {x:15, y:0.001024113}, {x:16, y:0.00131045}, {x:17, y:0.001570685}, {x:18, y:0.001783584}, {x:19, y:0.00195508}, {x:20, y:0.002126731}, {x:21, y:0.002292854}, {x:22, y:0.002402379}, {x:23, y:0.002440102}, {x:24, y:0.002424355}, {x:25, y:0.002384455}, {x:26, y:0.002350482}, {x:27, y:0.002331569}, {x:28, y:0.002342369}, {x:29, y:0.002377347}, {x:30, y:0.002417145}, {x:31, y:0.002454886}, {x:32, y:0.002504029}, {x:33, y:0.00256626}, {x:34, y:0.002641968}, {x:35, y:0.00273272}, {x:36, y:0.002837271}, {x:37, y:0.002953552}, {x:38, y:0.003081158}, {x:39, y:0.003223464}, {x:40, y:0.003383443}, {x:41, y:0.003567167}, {x:42, y:0.003780202}, {x:43, y:0.004026866}, {x:44, y:0.004306197}, {x:45, y:0.004612683}, {x:46, y:0.004945825}, {x:47, y:0.005311632}, {x:48, y:0.005712027}, {x:49, y:0.006146991}, {x:50, y:0.00661607}, {x:51, y:0.007118684}, {x:52, y:0.007655583}, {x:53, y:0.008227478}, {x:54, y:0.008836773}, {x:55, y:0.009495883}, {x:56, y:0.010201377}, {x:57, y:0.010939109}, {x:58, y:0.011705937}, {x:59, y:0.01251561}, {x:60, y:0.013386462}, {x:61, y:0.014341832}, {x:62, y:0.015398021}, {x:63, y:0.016573681}, {x:64, y:0.017875219}, {x:65, y:0.019271166}, {x:66, y:0.020790484}, {x:67, y:0.022512871}, {x:68, y:0.024481977}, {x:69, y:0.026688499}, {x:70, y:0.029072112}, {x:71, y:0.031624578}, {x:72, y:0.03441465}, {x:73, y:0.037470656}, {x:74, y:0.040801086}, {x:75, y:0.044391345}, {x:76, y:0.048255282}, {x:77, y:0.052447815}, {x:78, y:0.057008029}, {x:79, y:0.061964767}]

  const usaMales2017RawData = [{x:0, y:0.006302347}, {x:1, y:0.000422686}, {x:2, y:0.000287435}, {x:3, y:0.000224945}, {x:4, y:0.000158165}, {x:5, y:0.000155541}, {x:6, y:0.000138456}, {x:7, y:0.000124364}, {x:8, y:0.000110411}, {x:9, y:9.82037E-05}, {x:10, y:9.39768E-05}, {x:11, y:0.000107861}, {x:12, y:0.000151557}, {x:13, y:0.000231895}, {x:14, y:0.00034139}, {x:15, y:0.000461328}, {x:16, y:0.000584161}, {x:17, y:0.000717579}, {x:18, y:0.000858598}, {x:19, y:0.001001487}, {x:20, y:0.001147071}, {x:21, y:0.001285942}, {x:22, y:0.001402833}, {x:23, y:0.001489993}, {x:24, y:0.001553819}, {x:25, y:0.001609192}, {x:26, y:0.00166366}, {x:27, y:0.0017133}, {x:28, y:0.001761547}, {x:29, y:0.001810307}, {x:30, y:0.001858758}, {x:31, y:0.001907458}, {x:32, y:0.001959197}, {x:33, y:0.002014129}, {x:34, y:0.002071627}, {x:35, y:0.002139015}, {x:36, y:0.002211334}, {x:37, y:0.002276815}, {x:38, y:0.002332931}, {x:39, y:0.002389836}, {x:40, y:0.002462646}, {x:41, y:0.002565524}, {x:42, y:0.002700979}, {x:43, y:0.002869693}, {x:44, y:0.00306605}, {x:45, y:0.003280112}, {x:46, y:0.003520103}, {x:47, y:0.00380392}, {x:48, y:0.004145976}, {x:49, y:0.004546886}, {x:50, y:0.004978296}, {x:51, y:0.005440931}, {x:52, y:0.005965096}, {x:53, y:0.006548528}, {x:54, y:0.00716992}, {x:55, y:0.007803182}, {x:56, y:0.008444663}, {x:57, y:0.009116184}, {x:58, y:0.009838087}, {x:59, y:0.010619323}, {x:60, y:0.01146991}, {x:61, y:0.012361295}, {x:62, y:0.013260341}, {x:63, y:0.014139737}, {x:64, y:0.015018866}, {x:65, y:0.015941706}, {x:66, y:0.017026432}, {x:67, y:0.018188728}, {x:68, y:0.019483164}, {x:69, y:0.02099042}, {x:70, y:0.022447998}, {x:71, y:0.024630912}, {x:72, y:0.026569555}, {x:73, y:0.029040491}, {x:74, y:0.031539336}, {x:75, y:0.034644466}, {x:76, y:0.038148299}, {x:77, y:0.042249702}, {x:78, y:0.04652179}, {x:79, y:0.051400777}, {x:80, y:0.056782775}, {x:81, y:0.062514141}, {x:82, y:0.069451943}, {x:83, y:0.077621564}, {x:84, y:0.08615537}, {x:85, y:0.095450498}, {x:86, y:0.105788276}, {x:87, y:0.118526995}, {x:88, y:0.132437468}, {x:89, y:0.147541076}, {x:90, y:0.163838893}, {x:91, y:0.181308255}, {x:92, y:0.199899748}, {x:93, y:0.219535381}, {x:94, y:0.240107596}, {x:95, y:0.261480212}, {x:96, y:0.283490926}, {x:97, y:0.30595538}, {x:98, y:0.328673065}, {x:99, y:0.351434112}]

  // Fitted exponential curves 

  const fitELT17MalesHazard = []
  for (let i = 26; i < 100; i += 1) {
    fitELT17MalesHazard.push({
      x: i,
      y: (Math.pow(10, -4.4673) * Math.pow(10, i * 0.0406)).toPrecision(4)
    })
  }

  const fitELT17FemalesHazard = []
  for (let i = 26; i < 100; i += 1) {
    fitELT17FemalesHazard.push({
      x: i, 
      y: (Math.pow(10, -4.8111) * Math.pow(10, i * 0.0432)).toPrecision(4)
    })
  }

  const fitBraMalesHazard = []
  for (let i = 26; i < 80; i += 1) {
    fitBraMalesHazard.push({
      x: i,
      y: (Math.pow(10, -3.5531) * Math.pow(10, i * 0.0285)).toPrecision(4)
    })
  }

  const fitBraFemalesHazard = []
  for (let i = 26; i < 80; i += 1) {
    fitBraFemalesHazard.push({
      x: i,
      y: (Math.pow(10, -4.2067) * Math.pow(10, i * 0.0352)).toPrecision(4)
    })
  }

  const fitUSAMalesHazard = []
  for (let i = 26; i < 100; i += 1) {
    fitUSAMalesHazard.push({
      x: i,
      y: (Math.pow(10, -3.9064) * Math.pow(10, i * 0.0337)).toPrecision(4)
    })
  }

  const fitUSAFemalesHazard = []
  for (let i = 26; i < 100; i += 1) {
    fitUSAFemalesHazard.push({
      x: i,
      y: (Math.pow(10, -4.3268) * Math.pow(10, i * 0.0373)).toPrecision(4)
    })
  }

  buildCharts()
</script>