<script>
const darkenOptions = {
  variables: {
    "--bg": {
      light: "#fafafa",
      dark: "#2c2c2c"
    },
    "--bg-code-block": {
      light: "#f0f0f0",
      dark: "#111"
    },
    "--bg-inline-code": {
      light: "#eaeaea",
      dark: "#222"
    },      
    "--bg-expandable": {
      light: "#f6f6f6",
      dark: "#262626"
    },      
    "--text": {
      light: "#222",
      dark: "#ccc"
    },
    "--links": {
      light: "#0074d9",
      dark: "#74ADFF"
    },
    "--muted": {
      light: "#aaa",
      dark: "#7C7C7C"
    },
    "--border": {
      light: "#eee",
      dark: "#333"
    },
    "--marked": {
      light: "rgba(255, 255, 60, .4)",
      dark: "rgba(102, 102, 0, .3)"
    },
  },
  toggle: "#color-scheme-switch"
};

let darkenCallback = function(active) {
  // if Dark Mode is active
  if (active) {
    document.getElementById('dark-mode').classList.add("selected");
    document.getElementById('light-mode').classList.remove("selected");
    // document.getElementById('follow-system-settings').classList.remove("selected");
  }
  else {
    document.getElementById('light-mode').classList.add("selected");
    document.getElementById('dark-mode').classList.remove("selected");
    // document.getElementById('follow-system-settings').classList.remove("selected");    
  }

  if (window.hasOwnProperty("charts")) {
    const bodyEl = document.querySelector('body');
    const bodyCompStyle = window.getComputedStyle(bodyEl);
    Chart.defaults.global.defaultFontColor = bodyCompStyle.color;

    const mutedEl = document.querySelector('.muted');
    const mutedCompStyle = window.getComputedStyle(mutedEl);
    Chart.defaults.global.defaultColor = mutedCompStyle.color;

    charts.forEach(chart => {
      /* https://www.chartjs.org/docs/latest/developers/api.html?h=update */
      /* https://www.chartjs.org/docs/latest/developers/updates.html */
      chart.update();
    });
  }
};

const darkenInst = new darken(darkenOptions, darkenCallback);
</script>